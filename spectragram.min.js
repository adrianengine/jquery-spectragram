/*!
 * jQuery - Spectragram by Adrian Quevedo
 * http://adrianquevedo.com/  - http://lab.adrianquevedo.com/ - http://elnucleo.com.co/
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * You are free to use this plugin in commercial projects as long as the copyright header is left intact.
 *
 * This plugin uses the Instagram(tm) API and is not endorsed or certified by Instagram or Burbn, inc. 
 * All Instagram(tm) logos and trademarks displayed on this plugin are property of Burbn, Inc.
 *
 * Date: Thu Jul 15 14:05:02 2012 -0500
 * update: 2013/11/18 @vinicius73 -> callOnUserInfo, get info about user in feed
 */
 
"function"!==typeof Object.create&&(Object.create=function(c){function f(){}f.prototype=c;return new f});
(function(c,f,h,k){var g={userInfo:null,init:function(a,b){this.elem=b;this.$elem=c(b);this.api="https://api.instagram.com/v1";this.accessData=c.fn.spectragram.accessData;this.options=c.extend({},c.fn.spectragram.options,a)},getRecentMedia:function(a){var b=this;b.fetch("/users/"+a+"/media/recent/?"+b.accessData.clientID+"&access_token="+b.accessData.accessToken+"").done(function(a){b.display(a)})},getUserFeed:function(){var a=this;a.fetch("/users/search?q="+a.options.query+"&count="+a.options.max+
"&client_id="+a.accessData.clientID+"").done(function(b){a.userInfo=b.data[0];"function"===typeof a.options.callOnUserInfo&&a.options.callOnUserInfo(a);b.data.length?a.getRecentMedia(b.data[0].id):c.error("Spectagram.js - Error: the username "+a.options.query+" does not exist.")})},getPopular:function(){var a=this;a.fetch("/media/popular?client_id="+a.accessData.clientID+"&access_token="+a.accessData.accessToken+"").done(function(b){a.display(b)})},getRecentTagged:function(){var a=this;a.fetch("/tags/"+
a.options.query+"/media/recent?client_id="+a.accessData.clientID+"&access_token="+a.accessData.accessToken+"").done(function(b){b.data.length?a.display(b):c.error("Spectagram.js - Error: the tag "+a.options.query+" does not have results.")})},fetch:function(a){return c.ajax({type:"GET",dataType:"jsonp",cache:!1,url:this.api+a})},display:function(a){var b=this.options.size,e,f=this.options.max>=a.data.length?a.data.length:this.options.max;if(0===a.data.length)this.$elem.append(c(this.options.wrapEachWith).append(this.options.notFoundMsg));
else for(var d=0;d<f;d++)e="small"==b?a.data[d].images.thumbnail.url:"medium"==b?a.data[d].images.low_resolution.url:a.data[d].images.standard_resolution.url,this.$elem.append(c(this.options.wrapEachWith).append("<a title='"+a.data[d].caption.text+"' target='_blank' href='"+a.data[d].link+"'><img src='"+e+"'></img></a>"));"function"===typeof this.options.complete&&this.options.complete.call(this)}};jQuery.fn.spectragram=function(a,b){jQuery.fn.spectragram.accessData.clientID?this.each(function(){var e=
Object.create(g);e.init(b,this);if(e[a])return e[a](this);c.error("Method "+a+" does not exist on jQuery.spectragram")}):c.error("You must define an accessToken and a clientID on jQuery.spectragram")};jQuery.fn.spectragram.options={max:10,query:"coffee",size:"medium",wrapEachWith:"<li></li>",complete:null,callOnUserInfo:null};jQuery.fn.spectragram.accessData={accessToken:null,clientID:null}})(jQuery,window,document);
